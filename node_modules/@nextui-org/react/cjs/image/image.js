var e=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=void 0;var t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=u?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(require("react")),r=e(require("./image.skeleton")),a=e(require("../use-real-shape")),u=e(require("../use-current-state")),s=e(require("../use-resize")),o=require("./image.styles"),i=e(require("../utils/clsx")),n=require("react/jsx-runtime");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}const c=({src:e,width:l,height:c,showSkeleton:f,className:d,maxDelay:p,autoResize:m,objectFit:h,containerCss:y,css:x,...g})=>{const[w,b]=(0,t.useState)(!0),[j,q]=(0,t.useState)(f),{w:v,h:O}=(0,t.useMemo)((()=>({w:l?"number"==typeof l?`${l}px`:l:"auto",h:c?"number"==typeof c?`${c}px`:c:"auto"})),[l,c]),[M,S,k]=(0,u.default)(O),P=(0,t.useRef)(null),[D,N]=(0,a.default)(P),R=f&&!!l&&!!c;(0,t.useEffect)((()=>{R&&P.current&&P.current.complete&&(b(!1),q(!1))})),(0,t.useEffect)((()=>{const e=setTimeout((()=>{R&&q(!1),clearTimeout(e)}),p);return()=>clearTimeout(e)}),[w]),(0,t.useEffect)((()=>{if(!m)return;const e=0===D.width,t="auto"===k.current;!e&&l&&c&&(D.width<l?!t&&S("auto"):t&&S(O))}),[D,l]),(0,s.default)((()=>{m&&N()}));const _=(0,t.useMemo)((()=>w?"loading":"ready"),[w]);return(0,n.jsxs)(o.StyledImageContainer,{className:(0,i.default)("nextui-image-container",`nextui-image--${_}`,d),"data-state":_,ready:!w,css:{...y,width:v,height:M},children:[j&&(0,n.jsx)(r.default,{opacity:1}),(0,n.jsx)(o.StyledImage,{ref:P,className:"nextui-image",width:l,height:c,onLoad:()=>{b(!1)},src:e,"data-state":_,alt:g.alt||"",css:{objectFit:h,...x},...g})]})};c.toString=()=>".nextui-image",c.defaultProps={showSkeleton:!0,autoResize:!1,objectFit:"scale-down",maxDelay:3e3,className:""};var f=t.default.memo(c);exports.default=f,module.exports=exports.default;