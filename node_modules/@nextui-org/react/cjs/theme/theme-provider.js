var e=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=void 0;var t=f(require("react")),r=require("@react-aria/ssr"),u=e(require("../css-baseline")),n=f(require("./theme-context")),a=e(require("../utils/with-defaults")),l=e(require("../utils/deep-merge")),o=require("../utils/object"),s=require("./utils"),i=e(require("../use-ssr")),d=require("react/jsx-runtime");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=n?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(u,a,l):u[a]=e[a]}return u.default=e,r&&r.set(e,u),u}var m=(0,a.default)((({theme:e,disableBaseline:a,children:c})=>{const{isBrowser:f}=(0,i.default)(),[m,p]=(0,t.useState)(n.defaultContext.type),v=e=>{p((t=>t!==e?e:t))},b=e=>{const t=(0,s.getDocumentTheme)(e);t&&v(t)},h=(0,t.useMemo)((()=>{const e=f?(0,s.getDocumentCSSTokens)():{},t=(0,l.default)((0,o.copyObject)(n.defaultContext.theme),e),r=(0,s.getThemeName)(m);return{theme:t,type:r,isDark:"dark"===r}}),[m,f]);return(0,t.useEffect)((()=>{var e,t,r;b(null==(e=document)?void 0:e.documentElement);const u=new MutationObserver((e=>{var t;if(e&&e.length>0&&"BODY"===(null==(t=e[0])?void 0:t.target.nodeName)){var r,u,n;const e=null==(r=document)||null==(u=r.body)||null==(n=u.dataset)?void 0:n.theme;e&&v(e)}else{var a;b(null==(a=document)?void 0:a.documentElement)}}));return u.observe(null==(t=document)?void 0:t.documentElement,{attributes:!0,attributeFilter:["data-theme","style"]}),u.observe(null==(r=document)?void 0:r.body,{attributes:!0,attributeFilter:["data-theme","style"]}),()=>u.disconnect()}),[]),(0,t.useEffect)((()=>{f&&e&&null!=e&&e.className&&((0,s.changeTheme)(e.className),v((0,s.getThemeName)(e.className)))}),[f,e]),(0,d.jsx)(n.default.Provider,{value:h,children:(0,d.jsxs)(r.SSRProvider,{children:[!a&&(0,d.jsx)(u.default,{}),c]})})}),{disableBaseline:!1});exports.default=m,module.exports=exports.default;