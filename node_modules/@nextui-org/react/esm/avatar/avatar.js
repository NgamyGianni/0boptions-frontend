import a,{useMemo as t,useState as r,useRef as e,useEffect as s}from"react";import n from"./avatar.styles";import l from"../utils/clsx";import{jsx as i}from"react/jsx-runtime";import{jsxs as o}from"react/jsx-runtime";const c=a=>(null==a?void 0:a.length)<=4?a:null==a?void 0:a.slice(0,3),m=({src:a,text:m,icon:u,alt:x,className:d,...v})=>{const p=!a,[f,g]=r(!1),N=e(null);s((()=>{var a;(null==N||null==(a=N.current)?void 0:a.complete)&&g(!0)}),[]);const h=t((()=>!f&&a?"loading":"ready"),[a,f]);return o(n,{className:l({"only-text-avatar":p},d),"data-state":h,...v,children:[i("span",{className:"nextui-avatar-bg"}),!p&&i("img",{ref:N,className:l("nextui-avatar-img",`nextui-avatar--${h}`,{"nextui-avatar-ready":f}),src:a,alt:x,"data-state":h,onLoad:()=>g(!0)}),p&&!u&&m&&i("span",{className:"nextui-avatar-text",children:c(m)}),u&&i("span",{className:"nextui-avatar-icon",children:u})]})};m.toString=()=>".nextui-avatar";export default m;