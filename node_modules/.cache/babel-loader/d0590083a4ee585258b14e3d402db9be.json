{"ast":null,"code":"/* eslint no-underscore-dangle: \"off\" */\nimport { f7events, f7routers } from './f7';\nimport { extend, getComponentId } from './utils';\n\nvar getChildrenArray = function getChildrenArray(el) {\n  var arr = [];\n\n  for (var i = 0; i < el.children.length; i += 1) {\n    arr.push(el.children[i]);\n  }\n\n  return arr;\n};\n\nvar hasSameChildren = function hasSameChildren(childrenBefore, childrenAfter) {\n  if (childrenBefore.length !== childrenAfter.length) return false;\n  var set = new Set([].concat(childrenBefore, childrenAfter));\n  if (set.size === childrenBefore.length) return true;\n  return false;\n};\n\nexport default {\n  proto: {\n    pageComponentLoader: function pageComponentLoader(_ref) {\n      var routerEl = _ref.routerEl,\n          component = _ref.component,\n          options = _ref.options,\n          resolve = _ref.resolve,\n          reject = _ref.reject;\n      var router = this;\n      var routerId = router.id;\n      var el = routerEl;\n      var viewRouter;\n      f7routers.views.forEach(function (data) {\n        if (data.el && data.el === routerEl || data.routerId && data.routerId === routerId) {\n          viewRouter = data;\n        }\n      });\n\n      if (!viewRouter) {\n        reject();\n        return;\n      }\n\n      var pageData = {\n        component: component,\n        id: getComponentId(),\n        props: extend({\n          f7route: options.route,\n          f7router: router\n        }, options.route.params, options.props || {})\n      };\n      var resolved;\n      var childrenBefore = getChildrenArray(el);\n\n      function onDidUpdate(componentRouterData) {\n        if (componentRouterData !== viewRouter || resolved) return;\n        var childrenAfter = getChildrenArray(el);\n        if (hasSameChildren(childrenBefore, childrenAfter)) return;\n        f7events.off('viewRouterDidUpdate', onDidUpdate);\n        var pageEl = el.children[el.children.length - 1];\n        pageData.el = pageEl;\n        resolve(pageEl);\n        resolved = true;\n      }\n\n      f7events.on('viewRouterDidUpdate', onDidUpdate);\n      viewRouter.pages.push(pageData);\n      viewRouter.setPages(viewRouter.pages);\n    },\n    removePage: function removePage($pageEl) {\n      if (!$pageEl) return;\n      var router = this;\n      var f7Page;\n      if ('length' in $pageEl && $pageEl[0]) f7Page = $pageEl[0].f7Page;else f7Page = $pageEl.f7Page;\n\n      if (f7Page && f7Page.route && f7Page.route.route && f7Page.route.route.keepAlive) {\n        router.app.$($pageEl).remove();\n        return;\n      }\n\n      var viewRouter;\n      f7routers.views.forEach(function (data) {\n        if (data.el && data.el === router.el) {\n          viewRouter = data;\n        }\n      });\n      var pageEl;\n\n      if ('length' in $pageEl) {\n        // Dom7\n        if ($pageEl.length === 0) return;\n        pageEl = $pageEl[0];\n      } else {\n        pageEl = $pageEl;\n      }\n\n      if (!pageEl) return;\n      var pageComponentFound;\n      viewRouter.pages.forEach(function (page, index) {\n        if (page.el === pageEl) {\n          pageComponentFound = true;\n          viewRouter.pages.splice(index, 1);\n          viewRouter.setPages(viewRouter.pages);\n        }\n      });\n\n      if (!pageComponentFound) {\n        pageEl.parentNode.removeChild(pageEl);\n      }\n    },\n    tabComponentLoader: function tabComponentLoader(_temp) {\n      var _ref2 = _temp === void 0 ? {} : _temp,\n          tabEl = _ref2.tabEl,\n          component = _ref2.component,\n          options = _ref2.options,\n          resolve = _ref2.resolve,\n          reject = _ref2.reject;\n\n      var router = this;\n      if (!tabEl) reject();\n      var tabRouter;\n      f7routers.tabs.forEach(function (tabData) {\n        if (tabData.el && tabData.el === tabEl) {\n          tabRouter = tabData;\n        }\n      });\n\n      if (!tabRouter) {\n        reject();\n        return;\n      }\n\n      var id = getComponentId();\n      var tabContent = {\n        id: id,\n        component: component,\n        props: extend({\n          f7route: options.route,\n          f7router: router\n        }, options.route.route && options.route.route.tab && options.route.route.tab.options && options.route.route.tab.options.props || {}, options.route.params, options.props || {})\n      };\n      var resolved;\n\n      function onDidUpdate(componentRouterData) {\n        if (componentRouterData !== tabRouter || resolved) return;\n        f7events.off('tabRouterDidUpdate', onDidUpdate);\n        var tabContentEl = tabEl.children[0];\n        resolve(tabContentEl);\n        resolved = true;\n      }\n\n      f7events.on('tabRouterDidUpdate', onDidUpdate);\n      tabRouter.setTabContent(tabContent);\n    },\n    removeTabContent: function removeTabContent(tabEl) {\n      if (!tabEl) return;\n      var tabRouter;\n      f7routers.tabs.forEach(function (tabData) {\n        if (tabData.el && tabData.el === tabEl) {\n          tabRouter = tabData;\n        }\n      });\n\n      if (!tabRouter) {\n        tabEl.innerHTML = ''; // eslint-disable-line\n\n        return;\n      }\n\n      tabRouter.setTabContent(null);\n    },\n    modalComponentLoader: function modalComponentLoader(_temp2) {\n      var _ref3 = _temp2 === void 0 ? {} : _temp2,\n          component = _ref3.component,\n          options = _ref3.options,\n          resolve = _ref3.resolve,\n          reject = _ref3.reject;\n\n      var router = this;\n      var modalsRouter = f7routers.modals;\n\n      if (!modalsRouter) {\n        reject();\n        return;\n      }\n\n      var modalData = {\n        component: component,\n        id: getComponentId(),\n        props: extend({\n          f7route: options.route,\n          f7router: router\n        }, options.route.params, options.props || {})\n      };\n      var resolved;\n\n      function onDidUpdate() {\n        if (resolved) return;\n        f7events.off('modalsRouterDidUpdate', onDidUpdate);\n        var modalEl = modalsRouter.el.children[modalsRouter.el.children.length - 1];\n        modalData.el = modalEl;\n        resolve(modalEl);\n        resolved = true;\n      }\n\n      f7events.on('modalsRouterDidUpdate', onDidUpdate);\n      modalsRouter.modals.push(modalData);\n      modalsRouter.setModals(modalsRouter.modals);\n    },\n    removeModal: function removeModal(modalEl) {\n      var modalsRouter = f7routers.modals;\n      if (!modalsRouter) return;\n      var modalDataToRemove;\n      modalsRouter.modals.forEach(function (modalData) {\n        if (modalData.el === modalEl) modalDataToRemove = modalData;\n      });\n      modalsRouter.modals.splice(modalsRouter.modals.indexOf(modalDataToRemove), 1);\n      modalsRouter.setModals(modalsRouter.modals);\n    }\n  }\n};","map":{"version":3,"sources":["/Users/gianningamy/cryptobet/front-end/master/node_modules/framework7-react/esm/shared/components-router.js"],"names":["f7events","f7routers","extend","getComponentId","getChildrenArray","el","arr","i","children","length","push","hasSameChildren","childrenBefore","childrenAfter","set","Set","concat","size","proto","pageComponentLoader","_ref","routerEl","component","options","resolve","reject","router","routerId","id","viewRouter","views","forEach","data","pageData","props","f7route","route","f7router","params","resolved","onDidUpdate","componentRouterData","off","pageEl","on","pages","setPages","removePage","$pageEl","f7Page","keepAlive","app","$","remove","pageComponentFound","page","index","splice","parentNode","removeChild","tabComponentLoader","_temp","_ref2","tabEl","tabRouter","tabs","tabData","tabContent","tab","tabContentEl","setTabContent","removeTabContent","innerHTML","modalComponentLoader","_temp2","_ref3","modalsRouter","modals","modalData","modalEl","setModals","removeModal","modalDataToRemove","indexOf"],"mappings":"AAAA;AACA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,MAApC;AACA,SAASC,MAAT,EAAiBC,cAAjB,QAAuC,SAAvC;;AAEA,IAAIC,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,EAA1B,EAA8B;AACnD,MAAIC,GAAG,GAAG,EAAV;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,EAAE,CAACG,QAAH,CAAYC,MAAhC,EAAwCF,CAAC,IAAI,CAA7C,EAAgD;AAC9CD,IAAAA,GAAG,CAACI,IAAJ,CAASL,EAAE,CAACG,QAAH,CAAYD,CAAZ,CAAT;AACD;;AAED,SAAOD,GAAP;AACD,CARD;;AAUA,IAAIK,eAAe,GAAG,SAASA,eAAT,CAAyBC,cAAzB,EAAyCC,aAAzC,EAAwD;AAC5E,MAAID,cAAc,CAACH,MAAf,KAA0BI,aAAa,CAACJ,MAA5C,EAAoD,OAAO,KAAP;AACpD,MAAIK,GAAG,GAAG,IAAIC,GAAJ,CAAQ,GAAGC,MAAH,CAAUJ,cAAV,EAA0BC,aAA1B,CAAR,CAAV;AACA,MAAIC,GAAG,CAACG,IAAJ,KAAaL,cAAc,CAACH,MAAhC,EAAwC,OAAO,IAAP;AACxC,SAAO,KAAP;AACD,CALD;;AAOA,eAAe;AACbS,EAAAA,KAAK,EAAE;AACLC,IAAAA,mBAAmB,EAAE,SAASA,mBAAT,CAA6BC,IAA7B,EAAmC;AACtD,UAAIC,QAAQ,GAAGD,IAAI,CAACC,QAApB;AAAA,UACIC,SAAS,GAAGF,IAAI,CAACE,SADrB;AAAA,UAEIC,OAAO,GAAGH,IAAI,CAACG,OAFnB;AAAA,UAGIC,OAAO,GAAGJ,IAAI,CAACI,OAHnB;AAAA,UAIIC,MAAM,GAAGL,IAAI,CAACK,MAJlB;AAKA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAIC,QAAQ,GAAGD,MAAM,CAACE,EAAtB;AACA,UAAIvB,EAAE,GAAGgB,QAAT;AACA,UAAIQ,UAAJ;AACA5B,MAAAA,SAAS,CAAC6B,KAAV,CAAgBC,OAAhB,CAAwB,UAAUC,IAAV,EAAgB;AACtC,YAAIA,IAAI,CAAC3B,EAAL,IAAW2B,IAAI,CAAC3B,EAAL,KAAYgB,QAAvB,IAAmCW,IAAI,CAACL,QAAL,IAAiBK,IAAI,CAACL,QAAL,KAAkBA,QAA1E,EAAoF;AAClFE,UAAAA,UAAU,GAAGG,IAAb;AACD;AACF,OAJD;;AAMA,UAAI,CAACH,UAAL,EAAiB;AACfJ,QAAAA,MAAM;AACN;AACD;;AAED,UAAIQ,QAAQ,GAAG;AACbX,QAAAA,SAAS,EAAEA,SADE;AAEbM,QAAAA,EAAE,EAAEzB,cAAc,EAFL;AAGb+B,QAAAA,KAAK,EAAEhC,MAAM,CAAC;AACZiC,UAAAA,OAAO,EAAEZ,OAAO,CAACa,KADL;AAEZC,UAAAA,QAAQ,EAAEX;AAFE,SAAD,EAGVH,OAAO,CAACa,KAAR,CAAcE,MAHJ,EAGYf,OAAO,CAACW,KAAR,IAAiB,EAH7B;AAHA,OAAf;AAQA,UAAIK,QAAJ;AACA,UAAI3B,cAAc,GAAGR,gBAAgB,CAACC,EAAD,CAArC;;AAEA,eAASmC,WAAT,CAAqBC,mBAArB,EAA0C;AACxC,YAAIA,mBAAmB,KAAKZ,UAAxB,IAAsCU,QAA1C,EAAoD;AACpD,YAAI1B,aAAa,GAAGT,gBAAgB,CAACC,EAAD,CAApC;AACA,YAAIM,eAAe,CAACC,cAAD,EAAiBC,aAAjB,CAAnB,EAAoD;AACpDb,QAAAA,QAAQ,CAAC0C,GAAT,CAAa,qBAAb,EAAoCF,WAApC;AACA,YAAIG,MAAM,GAAGtC,EAAE,CAACG,QAAH,CAAYH,EAAE,CAACG,QAAH,CAAYC,MAAZ,GAAqB,CAAjC,CAAb;AACAwB,QAAAA,QAAQ,CAAC5B,EAAT,GAAcsC,MAAd;AACAnB,QAAAA,OAAO,CAACmB,MAAD,CAAP;AACAJ,QAAAA,QAAQ,GAAG,IAAX;AACD;;AAEDvC,MAAAA,QAAQ,CAAC4C,EAAT,CAAY,qBAAZ,EAAmCJ,WAAnC;AACAX,MAAAA,UAAU,CAACgB,KAAX,CAAiBnC,IAAjB,CAAsBuB,QAAtB;AACAJ,MAAAA,UAAU,CAACiB,QAAX,CAAoBjB,UAAU,CAACgB,KAA/B;AACD,KA/CI;AAgDLE,IAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBC,OAApB,EAA6B;AACvC,UAAI,CAACA,OAAL,EAAc;AACd,UAAItB,MAAM,GAAG,IAAb;AACA,UAAIuB,MAAJ;AACA,UAAI,YAAYD,OAAZ,IAAuBA,OAAO,CAAC,CAAD,CAAlC,EAAuCC,MAAM,GAAGD,OAAO,CAAC,CAAD,CAAP,CAAWC,MAApB,CAAvC,KAAuEA,MAAM,GAAGD,OAAO,CAACC,MAAjB;;AAEvE,UAAIA,MAAM,IAAIA,MAAM,CAACb,KAAjB,IAA0Ba,MAAM,CAACb,KAAP,CAAaA,KAAvC,IAAgDa,MAAM,CAACb,KAAP,CAAaA,KAAb,CAAmBc,SAAvE,EAAkF;AAChFxB,QAAAA,MAAM,CAACyB,GAAP,CAAWC,CAAX,CAAaJ,OAAb,EAAsBK,MAAtB;AACA;AACD;;AAED,UAAIxB,UAAJ;AACA5B,MAAAA,SAAS,CAAC6B,KAAV,CAAgBC,OAAhB,CAAwB,UAAUC,IAAV,EAAgB;AACtC,YAAIA,IAAI,CAAC3B,EAAL,IAAW2B,IAAI,CAAC3B,EAAL,KAAYqB,MAAM,CAACrB,EAAlC,EAAsC;AACpCwB,UAAAA,UAAU,GAAGG,IAAb;AACD;AACF,OAJD;AAKA,UAAIW,MAAJ;;AAEA,UAAI,YAAYK,OAAhB,EAAyB;AACvB;AACA,YAAIA,OAAO,CAACvC,MAAR,KAAmB,CAAvB,EAA0B;AAC1BkC,QAAAA,MAAM,GAAGK,OAAO,CAAC,CAAD,CAAhB;AACD,OAJD,MAIO;AACLL,QAAAA,MAAM,GAAGK,OAAT;AACD;;AAED,UAAI,CAACL,MAAL,EAAa;AACb,UAAIW,kBAAJ;AACAzB,MAAAA,UAAU,CAACgB,KAAX,CAAiBd,OAAjB,CAAyB,UAAUwB,IAAV,EAAgBC,KAAhB,EAAuB;AAC9C,YAAID,IAAI,CAAClD,EAAL,KAAYsC,MAAhB,EAAwB;AACtBW,UAAAA,kBAAkB,GAAG,IAArB;AACAzB,UAAAA,UAAU,CAACgB,KAAX,CAAiBY,MAAjB,CAAwBD,KAAxB,EAA+B,CAA/B;AACA3B,UAAAA,UAAU,CAACiB,QAAX,CAAoBjB,UAAU,CAACgB,KAA/B;AACD;AACF,OAND;;AAQA,UAAI,CAACS,kBAAL,EAAyB;AACvBX,QAAAA,MAAM,CAACe,UAAP,CAAkBC,WAAlB,CAA8BhB,MAA9B;AACD;AACF,KAxFI;AAyFLiB,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BC,KAA5B,EAAmC;AACrD,UAAIC,KAAK,GAAGD,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAApC;AAAA,UACIE,KAAK,GAAGD,KAAK,CAACC,KADlB;AAAA,UAEIzC,SAAS,GAAGwC,KAAK,CAACxC,SAFtB;AAAA,UAGIC,OAAO,GAAGuC,KAAK,CAACvC,OAHpB;AAAA,UAIIC,OAAO,GAAGsC,KAAK,CAACtC,OAJpB;AAAA,UAKIC,MAAM,GAAGqC,KAAK,CAACrC,MALnB;;AAOA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAI,CAACqC,KAAL,EAAYtC,MAAM;AAClB,UAAIuC,SAAJ;AACA/D,MAAAA,SAAS,CAACgE,IAAV,CAAelC,OAAf,CAAuB,UAAUmC,OAAV,EAAmB;AACxC,YAAIA,OAAO,CAAC7D,EAAR,IAAc6D,OAAO,CAAC7D,EAAR,KAAe0D,KAAjC,EAAwC;AACtCC,UAAAA,SAAS,GAAGE,OAAZ;AACD;AACF,OAJD;;AAMA,UAAI,CAACF,SAAL,EAAgB;AACdvC,QAAAA,MAAM;AACN;AACD;;AAED,UAAIG,EAAE,GAAGzB,cAAc,EAAvB;AACA,UAAIgE,UAAU,GAAG;AACfvC,QAAAA,EAAE,EAAEA,EADW;AAEfN,QAAAA,SAAS,EAAEA,SAFI;AAGfY,QAAAA,KAAK,EAAEhC,MAAM,CAAC;AACZiC,UAAAA,OAAO,EAAEZ,OAAO,CAACa,KADL;AAEZC,UAAAA,QAAQ,EAAEX;AAFE,SAAD,EAGVH,OAAO,CAACa,KAAR,CAAcA,KAAd,IAAuBb,OAAO,CAACa,KAAR,CAAcA,KAAd,CAAoBgC,GAA3C,IAAkD7C,OAAO,CAACa,KAAR,CAAcA,KAAd,CAAoBgC,GAApB,CAAwB7C,OAA1E,IAAqFA,OAAO,CAACa,KAAR,CAAcA,KAAd,CAAoBgC,GAApB,CAAwB7C,OAAxB,CAAgCW,KAArH,IAA8H,EAHpH,EAGwHX,OAAO,CAACa,KAAR,CAAcE,MAHtI,EAG8If,OAAO,CAACW,KAAR,IAAiB,EAH/J;AAHE,OAAjB;AAQA,UAAIK,QAAJ;;AAEA,eAASC,WAAT,CAAqBC,mBAArB,EAA0C;AACxC,YAAIA,mBAAmB,KAAKuB,SAAxB,IAAqCzB,QAAzC,EAAmD;AACnDvC,QAAAA,QAAQ,CAAC0C,GAAT,CAAa,oBAAb,EAAmCF,WAAnC;AACA,YAAI6B,YAAY,GAAGN,KAAK,CAACvD,QAAN,CAAe,CAAf,CAAnB;AACAgB,QAAAA,OAAO,CAAC6C,YAAD,CAAP;AACA9B,QAAAA,QAAQ,GAAG,IAAX;AACD;;AAEDvC,MAAAA,QAAQ,CAAC4C,EAAT,CAAY,oBAAZ,EAAkCJ,WAAlC;AACAwB,MAAAA,SAAS,CAACM,aAAV,CAAwBH,UAAxB;AACD,KApII;AAqILI,IAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BR,KAA1B,EAAiC;AACjD,UAAI,CAACA,KAAL,EAAY;AACZ,UAAIC,SAAJ;AACA/D,MAAAA,SAAS,CAACgE,IAAV,CAAelC,OAAf,CAAuB,UAAUmC,OAAV,EAAmB;AACxC,YAAIA,OAAO,CAAC7D,EAAR,IAAc6D,OAAO,CAAC7D,EAAR,KAAe0D,KAAjC,EAAwC;AACtCC,UAAAA,SAAS,GAAGE,OAAZ;AACD;AACF,OAJD;;AAMA,UAAI,CAACF,SAAL,EAAgB;AACdD,QAAAA,KAAK,CAACS,SAAN,GAAkB,EAAlB,CADc,CACQ;;AAEtB;AACD;;AAEDR,MAAAA,SAAS,CAACM,aAAV,CAAwB,IAAxB;AACD,KArJI;AAsJLG,IAAAA,oBAAoB,EAAE,SAASA,oBAAT,CAA8BC,MAA9B,EAAsC;AAC1D,UAAIC,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;AAAA,UACIpD,SAAS,GAAGqD,KAAK,CAACrD,SADtB;AAAA,UAEIC,OAAO,GAAGoD,KAAK,CAACpD,OAFpB;AAAA,UAGIC,OAAO,GAAGmD,KAAK,CAACnD,OAHpB;AAAA,UAIIC,MAAM,GAAGkD,KAAK,CAAClD,MAJnB;;AAMA,UAAIC,MAAM,GAAG,IAAb;AACA,UAAIkD,YAAY,GAAG3E,SAAS,CAAC4E,MAA7B;;AAEA,UAAI,CAACD,YAAL,EAAmB;AACjBnD,QAAAA,MAAM;AACN;AACD;;AAED,UAAIqD,SAAS,GAAG;AACdxD,QAAAA,SAAS,EAAEA,SADG;AAEdM,QAAAA,EAAE,EAAEzB,cAAc,EAFJ;AAGd+B,QAAAA,KAAK,EAAEhC,MAAM,CAAC;AACZiC,UAAAA,OAAO,EAAEZ,OAAO,CAACa,KADL;AAEZC,UAAAA,QAAQ,EAAEX;AAFE,SAAD,EAGVH,OAAO,CAACa,KAAR,CAAcE,MAHJ,EAGYf,OAAO,CAACW,KAAR,IAAiB,EAH7B;AAHC,OAAhB;AAQA,UAAIK,QAAJ;;AAEA,eAASC,WAAT,GAAuB;AACrB,YAAID,QAAJ,EAAc;AACdvC,QAAAA,QAAQ,CAAC0C,GAAT,CAAa,uBAAb,EAAsCF,WAAtC;AACA,YAAIuC,OAAO,GAAGH,YAAY,CAACvE,EAAb,CAAgBG,QAAhB,CAAyBoE,YAAY,CAACvE,EAAb,CAAgBG,QAAhB,CAAyBC,MAAzB,GAAkC,CAA3D,CAAd;AACAqE,QAAAA,SAAS,CAACzE,EAAV,GAAe0E,OAAf;AACAvD,QAAAA,OAAO,CAACuD,OAAD,CAAP;AACAxC,QAAAA,QAAQ,GAAG,IAAX;AACD;;AAEDvC,MAAAA,QAAQ,CAAC4C,EAAT,CAAY,uBAAZ,EAAqCJ,WAArC;AACAoC,MAAAA,YAAY,CAACC,MAAb,CAAoBnE,IAApB,CAAyBoE,SAAzB;AACAF,MAAAA,YAAY,CAACI,SAAb,CAAuBJ,YAAY,CAACC,MAApC;AACD,KA3LI;AA4LLI,IAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBF,OAArB,EAA8B;AACzC,UAAIH,YAAY,GAAG3E,SAAS,CAAC4E,MAA7B;AACA,UAAI,CAACD,YAAL,EAAmB;AACnB,UAAIM,iBAAJ;AACAN,MAAAA,YAAY,CAACC,MAAb,CAAoB9C,OAApB,CAA4B,UAAU+C,SAAV,EAAqB;AAC/C,YAAIA,SAAS,CAACzE,EAAV,KAAiB0E,OAArB,EAA8BG,iBAAiB,GAAGJ,SAApB;AAC/B,OAFD;AAGAF,MAAAA,YAAY,CAACC,MAAb,CAAoBpB,MAApB,CAA2BmB,YAAY,CAACC,MAAb,CAAoBM,OAApB,CAA4BD,iBAA5B,CAA3B,EAA2E,CAA3E;AACAN,MAAAA,YAAY,CAACI,SAAb,CAAuBJ,YAAY,CAACC,MAApC;AACD;AArMI;AADM,CAAf","sourcesContent":["/* eslint no-underscore-dangle: \"off\" */\nimport { f7events, f7routers } from './f7';\nimport { extend, getComponentId } from './utils';\n\nvar getChildrenArray = function getChildrenArray(el) {\n  var arr = [];\n\n  for (var i = 0; i < el.children.length; i += 1) {\n    arr.push(el.children[i]);\n  }\n\n  return arr;\n};\n\nvar hasSameChildren = function hasSameChildren(childrenBefore, childrenAfter) {\n  if (childrenBefore.length !== childrenAfter.length) return false;\n  var set = new Set([].concat(childrenBefore, childrenAfter));\n  if (set.size === childrenBefore.length) return true;\n  return false;\n};\n\nexport default {\n  proto: {\n    pageComponentLoader: function pageComponentLoader(_ref) {\n      var routerEl = _ref.routerEl,\n          component = _ref.component,\n          options = _ref.options,\n          resolve = _ref.resolve,\n          reject = _ref.reject;\n      var router = this;\n      var routerId = router.id;\n      var el = routerEl;\n      var viewRouter;\n      f7routers.views.forEach(function (data) {\n        if (data.el && data.el === routerEl || data.routerId && data.routerId === routerId) {\n          viewRouter = data;\n        }\n      });\n\n      if (!viewRouter) {\n        reject();\n        return;\n      }\n\n      var pageData = {\n        component: component,\n        id: getComponentId(),\n        props: extend({\n          f7route: options.route,\n          f7router: router\n        }, options.route.params, options.props || {})\n      };\n      var resolved;\n      var childrenBefore = getChildrenArray(el);\n\n      function onDidUpdate(componentRouterData) {\n        if (componentRouterData !== viewRouter || resolved) return;\n        var childrenAfter = getChildrenArray(el);\n        if (hasSameChildren(childrenBefore, childrenAfter)) return;\n        f7events.off('viewRouterDidUpdate', onDidUpdate);\n        var pageEl = el.children[el.children.length - 1];\n        pageData.el = pageEl;\n        resolve(pageEl);\n        resolved = true;\n      }\n\n      f7events.on('viewRouterDidUpdate', onDidUpdate);\n      viewRouter.pages.push(pageData);\n      viewRouter.setPages(viewRouter.pages);\n    },\n    removePage: function removePage($pageEl) {\n      if (!$pageEl) return;\n      var router = this;\n      var f7Page;\n      if ('length' in $pageEl && $pageEl[0]) f7Page = $pageEl[0].f7Page;else f7Page = $pageEl.f7Page;\n\n      if (f7Page && f7Page.route && f7Page.route.route && f7Page.route.route.keepAlive) {\n        router.app.$($pageEl).remove();\n        return;\n      }\n\n      var viewRouter;\n      f7routers.views.forEach(function (data) {\n        if (data.el && data.el === router.el) {\n          viewRouter = data;\n        }\n      });\n      var pageEl;\n\n      if ('length' in $pageEl) {\n        // Dom7\n        if ($pageEl.length === 0) return;\n        pageEl = $pageEl[0];\n      } else {\n        pageEl = $pageEl;\n      }\n\n      if (!pageEl) return;\n      var pageComponentFound;\n      viewRouter.pages.forEach(function (page, index) {\n        if (page.el === pageEl) {\n          pageComponentFound = true;\n          viewRouter.pages.splice(index, 1);\n          viewRouter.setPages(viewRouter.pages);\n        }\n      });\n\n      if (!pageComponentFound) {\n        pageEl.parentNode.removeChild(pageEl);\n      }\n    },\n    tabComponentLoader: function tabComponentLoader(_temp) {\n      var _ref2 = _temp === void 0 ? {} : _temp,\n          tabEl = _ref2.tabEl,\n          component = _ref2.component,\n          options = _ref2.options,\n          resolve = _ref2.resolve,\n          reject = _ref2.reject;\n\n      var router = this;\n      if (!tabEl) reject();\n      var tabRouter;\n      f7routers.tabs.forEach(function (tabData) {\n        if (tabData.el && tabData.el === tabEl) {\n          tabRouter = tabData;\n        }\n      });\n\n      if (!tabRouter) {\n        reject();\n        return;\n      }\n\n      var id = getComponentId();\n      var tabContent = {\n        id: id,\n        component: component,\n        props: extend({\n          f7route: options.route,\n          f7router: router\n        }, options.route.route && options.route.route.tab && options.route.route.tab.options && options.route.route.tab.options.props || {}, options.route.params, options.props || {})\n      };\n      var resolved;\n\n      function onDidUpdate(componentRouterData) {\n        if (componentRouterData !== tabRouter || resolved) return;\n        f7events.off('tabRouterDidUpdate', onDidUpdate);\n        var tabContentEl = tabEl.children[0];\n        resolve(tabContentEl);\n        resolved = true;\n      }\n\n      f7events.on('tabRouterDidUpdate', onDidUpdate);\n      tabRouter.setTabContent(tabContent);\n    },\n    removeTabContent: function removeTabContent(tabEl) {\n      if (!tabEl) return;\n      var tabRouter;\n      f7routers.tabs.forEach(function (tabData) {\n        if (tabData.el && tabData.el === tabEl) {\n          tabRouter = tabData;\n        }\n      });\n\n      if (!tabRouter) {\n        tabEl.innerHTML = ''; // eslint-disable-line\n\n        return;\n      }\n\n      tabRouter.setTabContent(null);\n    },\n    modalComponentLoader: function modalComponentLoader(_temp2) {\n      var _ref3 = _temp2 === void 0 ? {} : _temp2,\n          component = _ref3.component,\n          options = _ref3.options,\n          resolve = _ref3.resolve,\n          reject = _ref3.reject;\n\n      var router = this;\n      var modalsRouter = f7routers.modals;\n\n      if (!modalsRouter) {\n        reject();\n        return;\n      }\n\n      var modalData = {\n        component: component,\n        id: getComponentId(),\n        props: extend({\n          f7route: options.route,\n          f7router: router\n        }, options.route.params, options.props || {})\n      };\n      var resolved;\n\n      function onDidUpdate() {\n        if (resolved) return;\n        f7events.off('modalsRouterDidUpdate', onDidUpdate);\n        var modalEl = modalsRouter.el.children[modalsRouter.el.children.length - 1];\n        modalData.el = modalEl;\n        resolve(modalEl);\n        resolved = true;\n      }\n\n      f7events.on('modalsRouterDidUpdate', onDidUpdate);\n      modalsRouter.modals.push(modalData);\n      modalsRouter.setModals(modalsRouter.modals);\n    },\n    removeModal: function removeModal(modalEl) {\n      var modalsRouter = f7routers.modals;\n      if (!modalsRouter) return;\n      var modalDataToRemove;\n      modalsRouter.modals.forEach(function (modalData) {\n        if (modalData.el === modalEl) modalDataToRemove = modalData;\n      });\n      modalsRouter.modals.splice(modalsRouter.modals.indexOf(modalDataToRemove), 1);\n      modalsRouter.setModals(modalsRouter.modals);\n    }\n  }\n};"]},"metadata":{},"sourceType":"module"}