{"ast":null,"code":"var _jsxFileName = \"/Users/gianningamy/cryptobet/front-end/refactoring/src/Components/PreviousGame.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport Web3 from \"web3\";\nimport { abi } from \"../Config/abi\";\nimport { ADDRESS } from \"../Config/contract\";\nimport { UserContext } from \"../Provider/UserProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PreviousGame = ({\n  idCurrentGame\n}) => {\n  _s();\n\n  const web3 = new Web3(window.ethereum);\n  let contract = new web3.eth.Contract(abi, ADDRESS);\n  const {\n    user: userInfos\n  } = useContext(UserContext);\n  const [gameInfos, setGameInfos] = useState({\n    CurrentGameId: 0\n  });\n\n  const getGameInfos = async idGame => {\n    let game;\n    let statusGame;\n    let currentPrice;\n    let currentGameId = idGame;\n    await contract.methods.Games(currentGameId).call().then(function (receipt) {\n      game = receipt;\n    });\n    await contract.methods.getCurrentPrice().call().then(function (receipt) {\n      currentPrice = receipt / 10 ** 8;\n    });\n    let min = String((game.endTimestamp - Math.floor(Date.now() / 1000)) % 60);\n\n    if (min < 10) {\n      min = \"0\" + min;\n    }\n\n    let priceStart = 0;\n\n    if (currentGameId !== 0) {\n      await contract.methods.Games(parseInt(currentGameId) - 1).call().then(function (receipt) {\n        priceStart = receipt.priceEnd / 10 ** 8;\n      });\n    }\n\n    let userGame = await contract.methods.users(currentGameId, userInfos.account).call();\n    let poolChoice = userGame.poolChoice;\n    if (poolChoice === 1) poolChoice = \"UP\";else poolChoice = \"DOWN\";\n    statusGame = \"Closed\";\n    setGameInfos({\n      Pool1Amount: web3.utils.fromWei(game.upAmount, \"ether\"),\n      Pool0Amount: web3.utils.fromWei(game.downAmount, \"ether\"),\n      Pool1Payout: parseFloat(game.upAmount) > 0 ? ((parseFloat(game.upAmount) + parseFloat(game.downAmount)) / parseFloat(game.upAmount)).toFixed(2) : \"1.00\",\n      Pool0Payout: parseFloat(game.downAmount) > 0 ? ((parseFloat(game.upAmount) + parseFloat(game.downAmount)) / parseFloat(game.downAmount)).toFixed(2) : \"1.00\",\n      status: statusGame,\n      PriceStart: priceStart.toFixed(3),\n      PriceEnd: (game.priceEnd / 10 ** 8).toFixed(3),\n      CurrentPrice: currentPrice.toFixed(3),\n      CurrentGameId: currentGameId,\n      playerState: parseInt(userGame.amount) > 0 ? poolChoice + \" : \" + web3.utils.fromWei(userGame.amount, \"ether\") + \" MATIC\" : \"OUT\",\n      TimeLeft: String(Math.floor((game.endTimestamp - Math.floor(Date.now() / 1000)) / 60)) + \" : \" + min,\n      winner: game.priceEnd / 10 ** 8 > priceStart ? \"UP\" : \"DOWN\"\n    });\n  };\n\n  useEffect(() => {\n    getGameInfos(idCurrentGame);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    style: gameInfos.winner === \"UP\" ? {\n      border: \"3px solid rgb(39, 255, 96)\"\n    } : {\n      border: \"3px solid rgb(255, 67, 67)\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(StatusContainer, {\n      children: [/*#__PURE__*/_jsxDEV(State, {\n        children: gameInfos.status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Id, {\n        children: [\"#\", gameInfos.CurrentGameId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Up, {\n      style: gameInfos.winner === \"UP\" ? {} : {\n        background: \"linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%)\",\n        color: \"rgb(84, 36, 50)\",\n        border: \"3px solid rgb(84, 36, 50)\"\n      },\n      children: [\"UP x\", gameInfos.Pool1Payout, \" Payout\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(StatsContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Stats, {\n        children: [/*#__PURE__*/_jsxDEV(Key, {\n          children: \"Closed ETH price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Value, {\n          style: gameInfos.winner === \"UP\" ? {\n            border: \"3px solid rgb(39, 255, 96)\"\n          } : {\n            border: \"3px solid rgb(255, 67, 67)\"\n          },\n          children: [gameInfos.PriceEnd, \" $\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Stats, {\n        children: [/*#__PURE__*/_jsxDEV(Key, {\n          children: \"Locked ETH price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Value, {\n          children: [gameInfos.PriceStart, \" $\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Stats, {\n        children: [/*#__PURE__*/_jsxDEV(Key, {\n          children: \"Prize pool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Value, {\n          children: [parseFloat(gameInfos.Pool0Amount) + parseFloat(gameInfos.Pool1Amount) > 0 ? (parseFloat(gameInfos.Pool0Amount) + parseFloat(gameInfos.Pool1Amount)).toFixed(2) : 0, \" \", \"MATIC\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Down, {\n      style: gameInfos.winner === \"DOWN\" ? {} : {\n        background: \"linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%)\",\n        color: \"rgb(84, 36, 50)\",\n        border: \"3px solid rgb(84, 36, 50)\"\n      },\n      children: [\"DOWN x\", gameInfos.Pool0Payout, \" Payout\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(OutputContainer, {\n      children: /*#__PURE__*/_jsxDEV(Output, {\n        children: gameInfos.playerState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 3\n  }, this);\n};\n\n_s(PreviousGame, \"xPIFu39A1m4nrrbHBeYzYjngDZ4=\");\n\n_c = PreviousGame;\nconst Container = styled.div`\n\tbackground-image: linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\n\tcolor: rgb(84, 36, 50);\n\tmargin-top: 5rem;\n\twidth: 400px;\n\theight: 350px;\n\tborder-radius: 1rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-family: Inter, sans-serif;\n\tflex-direction: column;\n`;\n_c2 = Container;\nconst StatusContainer = styled.div`\n\tbackground-color: #191b1f;\n\tborder: #191b1f;\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\tdisplay: flex;\n\twidth: 100%;\n\theight: 100%;\n`;\n_c3 = StatusContainer;\nconst State = styled.div`\n\tgrid-area: Status;\n\twidth: 50%;\n\ttext-align: center;\n\tcolor: rgb(255, 67, 67);\n`;\n_c4 = State;\nconst Id = styled.div`\n\tgrid-area: Status;\n\twidth: 50%;\n\ttext-align: center;\n\tcolor: rgb(149, 177, 254);\n`;\n_c5 = Id;\nconst Up = styled.div`\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\tborder: 3px solid rgb(39, 255, 96);\n\tbackground: rgb(149, 177, 254);\n\tcolor: rgb(39, 255, 96);\n\ttext-align: center;\n`;\n_c6 = Up;\nconst Down = styled.div`\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\tborder: 3px solid rgb(255, 67, 67);\n\tbackground: rgb(206, 162, 206);\n\tcolor: rgb(255, 67, 67);\n\ttext-align: center;\n`;\n_c7 = Down;\nconst StatsContainer = styled.div`\n\tbackground-color: #191b1f;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 0.5rem;\n`;\n_c8 = StatsContainer;\nconst Stats = styled.div`\n\tpadding: 0.7rem;\n\tborder-radius: 0.5rem;\n\tdisplay: flex;\n\twidth: 100%;\n`;\n_c9 = Stats;\nconst Key = styled.div`\n\tbackground-color: rgb(33, 36, 41);\n\tborder: 1px solid rgb(33, 36, 41);\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: rgb(149, 177, 254);\n`;\n_c10 = Key;\nconst Value = styled.div`\n\tcolor: rgb(149, 177, 254);\n\tborder: 1px solid rgb(33, 36, 41);\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 60%;\n\ttext-align: center;\n`;\n_c11 = Value;\nconst OutputContainer = styled.div`\n\tbackground-image: linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\n\tborder: 1px solid linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\theight: 10%;\n\tjustify-content: center;\n`;\n_c12 = OutputContainer;\nconst Output = styled.p`\n\ttext-align: center;\n`;\n_c13 = Output;\nexport default PreviousGame;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13;\n\n$RefreshReg$(_c, \"PreviousGame\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"StatusContainer\");\n$RefreshReg$(_c4, \"State\");\n$RefreshReg$(_c5, \"Id\");\n$RefreshReg$(_c6, \"Up\");\n$RefreshReg$(_c7, \"Down\");\n$RefreshReg$(_c8, \"StatsContainer\");\n$RefreshReg$(_c9, \"Stats\");\n$RefreshReg$(_c10, \"Key\");\n$RefreshReg$(_c11, \"Value\");\n$RefreshReg$(_c12, \"OutputContainer\");\n$RefreshReg$(_c13, \"Output\");","map":{"version":3,"sources":["/Users/gianningamy/cryptobet/front-end/refactoring/src/Components/PreviousGame.jsx"],"names":["React","useState","useEffect","useContext","styled","Web3","abi","ADDRESS","UserContext","PreviousGame","idCurrentGame","web3","window","ethereum","contract","eth","Contract","user","userInfos","gameInfos","setGameInfos","CurrentGameId","getGameInfos","idGame","game","statusGame","currentPrice","currentGameId","methods","Games","call","then","receipt","getCurrentPrice","min","String","endTimestamp","Math","floor","Date","now","priceStart","parseInt","priceEnd","userGame","users","account","poolChoice","Pool1Amount","utils","fromWei","upAmount","Pool0Amount","downAmount","Pool1Payout","parseFloat","toFixed","Pool0Payout","status","PriceStart","PriceEnd","CurrentPrice","playerState","amount","TimeLeft","winner","border","background","color","Container","div","StatusContainer","State","Id","Up","Down","StatsContainer","Stats","Key","Value","OutputContainer","Output","p"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\"\nimport styled from \"styled-components\"\nimport Web3 from \"web3\"\nimport { abi } from \"../Config/abi\"\nimport { ADDRESS } from \"../Config/contract\"\nimport { UserContext } from \"../Provider/UserProvider\"\n\nconst PreviousGame = ({ idCurrentGame }) => {\n\tconst web3 = new Web3(window.ethereum)\n\tlet contract = new web3.eth.Contract(abi, ADDRESS)\n\tconst { user: userInfos } = useContext(UserContext)\n\n\tconst [gameInfos, setGameInfos] = useState({ CurrentGameId: 0 })\n\n\tconst getGameInfos = async (idGame) => {\n\t\tlet game\n\t\tlet statusGame\n\t\tlet currentPrice\n\t\tlet currentGameId = idGame\n\n\t\tawait contract.methods\n\t\t\t.Games(currentGameId)\n\t\t\t.call()\n\t\t\t.then(function (receipt) {\n\t\t\t\tgame = receipt\n\t\t\t})\n\n\t\tawait contract.methods\n\t\t\t.getCurrentPrice()\n\t\t\t.call()\n\t\t\t.then(function (receipt) {\n\t\t\t\tcurrentPrice = receipt / 10 ** 8\n\t\t\t})\n\n\t\tlet min = String((game.endTimestamp - Math.floor(Date.now() / 1000)) % 60)\n\t\tif (min < 10) {\n\t\t\tmin = \"0\" + min\n\t\t}\n\n\t\tlet priceStart = 0\n\t\tif (currentGameId !== 0) {\n\t\t\tawait contract.methods\n\t\t\t\t.Games(parseInt(currentGameId) - 1)\n\t\t\t\t.call()\n\t\t\t\t.then(function (receipt) {\n\t\t\t\t\tpriceStart = receipt.priceEnd / 10 ** 8\n\t\t\t\t})\n\t\t}\n\n\t\tlet userGame = await contract.methods.users(currentGameId, userInfos.account).call()\n\t\tlet poolChoice = userGame.poolChoice\n\t\tif (poolChoice === 1) poolChoice = \"UP\"\n\t\telse poolChoice = \"DOWN\"\n\n\t\tstatusGame = \"Closed\"\n\t\tsetGameInfos({\n\t\t\tPool1Amount: web3.utils.fromWei(game.upAmount, \"ether\"),\n\t\t\tPool0Amount: web3.utils.fromWei(game.downAmount, \"ether\"),\n\t\t\tPool1Payout:\n\t\t\t\tparseFloat(game.upAmount) > 0 ? ((parseFloat(game.upAmount) + parseFloat(game.downAmount)) / parseFloat(game.upAmount)).toFixed(2) : \"1.00\",\n\t\t\tPool0Payout:\n\t\t\t\tparseFloat(game.downAmount) > 0\n\t\t\t\t\t? ((parseFloat(game.upAmount) + parseFloat(game.downAmount)) / parseFloat(game.downAmount)).toFixed(2)\n\t\t\t\t\t: \"1.00\",\n\t\t\tstatus: statusGame,\n\t\t\tPriceStart: priceStart.toFixed(3),\n\t\t\tPriceEnd: (game.priceEnd / 10 ** 8).toFixed(3),\n\t\t\tCurrentPrice: currentPrice.toFixed(3),\n\t\t\tCurrentGameId: currentGameId,\n\t\t\tplayerState: parseInt(userGame.amount) > 0 ? poolChoice + \" : \" + web3.utils.fromWei(userGame.amount, \"ether\") + \" MATIC\" : \"OUT\",\n\t\t\tTimeLeft: String(Math.floor((game.endTimestamp - Math.floor(Date.now() / 1000)) / 60)) + \" : \" + min,\n\t\t\twinner: game.priceEnd / 10 ** 8 > priceStart ? \"UP\" : \"DOWN\"\n\t\t})\n\t}\n\tuseEffect(() => {\n\t\tgetGameInfos(idCurrentGame)\n\t}, [])\n\treturn (\n\t\t<Container style={gameInfos.winner === \"UP\" ? { border: \"3px solid rgb(39, 255, 96)\" } : { border: \"3px solid rgb(255, 67, 67)\" }}>\n\t\t\t<StatusContainer>\n\t\t\t\t<State>{gameInfos.status}</State>\n\t\t\t\t<Id>#{gameInfos.CurrentGameId}</Id>\n\t\t\t</StatusContainer>\n\t\t\t<Up\n\t\t\t\tstyle={\n\t\t\t\t\tgameInfos.winner === \"UP\"\n\t\t\t\t\t\t? {}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tbackground: \"linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%)\",\n\t\t\t\t\t\t\t\tcolor: \"rgb(84, 36, 50)\",\n\t\t\t\t\t\t\t\tborder: \"3px solid rgb(84, 36, 50)\"\n\t\t\t\t\t\t  }\n\t\t\t\t}>\n\t\t\t\tUP x{gameInfos.Pool1Payout} Payout\n\t\t\t</Up>\n\t\t\t<StatsContainer>\n\t\t\t\t<Stats>\n\t\t\t\t\t<Key>Closed ETH price</Key>\n\t\t\t\t\t<Value style={gameInfos.winner === \"UP\" ? { border: \"3px solid rgb(39, 255, 96)\" } : { border: \"3px solid rgb(255, 67, 67)\" }}>\n\t\t\t\t\t\t{gameInfos.PriceEnd} $\n\t\t\t\t\t</Value>\n\t\t\t\t</Stats>\n\t\t\t\t<Stats>\n\t\t\t\t\t<Key>Locked ETH price</Key>\n\t\t\t\t\t<Value>{gameInfos.PriceStart} $</Value>\n\t\t\t\t</Stats>\n\t\t\t\t<Stats>\n\t\t\t\t\t<Key>Prize pool</Key>\n\t\t\t\t\t<Value>\n\t\t\t\t\t\t{parseFloat(gameInfos.Pool0Amount) + parseFloat(gameInfos.Pool1Amount) > 0\n\t\t\t\t\t\t\t? (parseFloat(gameInfos.Pool0Amount) + parseFloat(gameInfos.Pool1Amount)).toFixed(2)\n\t\t\t\t\t\t\t: 0}{\" \"}\n\t\t\t\t\t\tMATIC\n\t\t\t\t\t</Value>\n\t\t\t\t</Stats>\n\t\t\t</StatsContainer>\n\t\t\t<Down\n\t\t\t\tstyle={\n\t\t\t\t\tgameInfos.winner === \"DOWN\"\n\t\t\t\t\t\t? {}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tbackground: \"linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%)\",\n\t\t\t\t\t\t\t\tcolor: \"rgb(84, 36, 50)\",\n\t\t\t\t\t\t\t\tborder: \"3px solid rgb(84, 36, 50)\"\n\t\t\t\t\t\t  }\n\t\t\t\t}>\n\t\t\t\tDOWN x{gameInfos.Pool0Payout} Payout\n\t\t\t</Down>\n\t\t\t<OutputContainer>\n\t\t\t\t<Output>{gameInfos.playerState}</Output>\n\t\t\t</OutputContainer>\n\t\t</Container>\n\t)\n}\n\nconst Container = styled.div`\n\tbackground-image: linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\n\tcolor: rgb(84, 36, 50);\n\tmargin-top: 5rem;\n\twidth: 400px;\n\theight: 350px;\n\tborder-radius: 1rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-family: Inter, sans-serif;\n\tflex-direction: column;\n`\n\nconst StatusContainer = styled.div`\n\tbackground-color: #191b1f;\n\tborder: #191b1f;\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\tdisplay: flex;\n\twidth: 100%;\n\theight: 100%;\n`\n\nconst State = styled.div`\n\tgrid-area: Status;\n\twidth: 50%;\n\ttext-align: center;\n\tcolor: rgb(255, 67, 67);\n`\n\nconst Id = styled.div`\n\tgrid-area: Status;\n\twidth: 50%;\n\ttext-align: center;\n\tcolor: rgb(149, 177, 254);\n`\n\nconst Up = styled.div`\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\tborder: 3px solid rgb(39, 255, 96);\n\tbackground: rgb(149, 177, 254);\n\tcolor: rgb(39, 255, 96);\n\ttext-align: center;\n`\n\nconst Down = styled.div`\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\tborder: 3px solid rgb(255, 67, 67);\n\tbackground: rgb(206, 162, 206);\n\tcolor: rgb(255, 67, 67);\n\ttext-align: center;\n`\n\nconst StatsContainer = styled.div`\n\tbackground-color: #191b1f;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 0.5rem;\n`\n\nconst Stats = styled.div`\n\tpadding: 0.7rem;\n\tborder-radius: 0.5rem;\n\tdisplay: flex;\n\twidth: 100%;\n`\n\nconst Key = styled.div`\n\tbackground-color: rgb(33, 36, 41);\n\tborder: 1px solid rgb(33, 36, 41);\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: rgb(149, 177, 254);\n`\n\nconst Value = styled.div`\n\tcolor: rgb(149, 177, 254);\n\tborder: 1px solid rgb(33, 36, 41);\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 60%;\n\ttext-align: center;\n`\n\nconst OutputContainer = styled.div`\n\tbackground-image: linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\n\tborder: 1px solid linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\twidth: 100%;\n\theight: 10%;\n\tjustify-content: center;\n`\n\nconst Output = styled.p`\n\ttext-align: center;\n`\n\nexport default PreviousGame\n"]},"metadata":{},"sourceType":"module"}