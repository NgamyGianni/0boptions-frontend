{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n/* eslint-disable no-nested-ternary */\n\n\nimport React, { forwardRef, useRef, useImperativeHandle, useState } from 'react';\nimport { useIsomorphicLayoutEffect } from '../shared/use-isomorphic-layout-effect';\nimport { classNames, getExtraAttrs, noUndefinedProps, emit, getRouterId } from '../shared/utils';\nimport { colorClasses } from '../shared/mixins';\nimport { f7ready, f7routers, f7, f7events } from '../shared/f7';\nimport { useTab } from '../shared/use-tab';\nimport { useAsyncComponent } from '../shared/use-async-component';\nimport { getRouterInitialComponent } from '../shared/get-router-initial-component';\nimport { RouterContext } from '../shared/router-context';\nvar View = /*#__PURE__*/forwardRef(function (props, ref) {\n  var className = props.className,\n      id = props.id,\n      style = props.style,\n      children = props.children,\n      _props$init = props.init,\n      init = _props$init === void 0 ? true : _props$init,\n      main = props.main,\n      tab = props.tab,\n      tabActive = props.tabActive,\n      url = props.url,\n      _props$browserHistory = props.browserHistoryInitialMatch,\n      browserHistoryInitialMatch = _props$browserHistory === void 0 ? true : _props$browserHistory;\n  var childrenArray = React.Children.toArray(children);\n  var initialPageComponent = childrenArray.filter(function (c) {\n    return c.props && c.props.initialPage;\n  })[0];\n  var restChildren = childrenArray.filter(function (c) {\n    return !c.props || !c.props.initialPage;\n  });\n  var extraAttrs = getExtraAttrs(props);\n\n  var _f7View = useRef(null);\n\n  var elRef = useRef(null);\n  var routerData = useRef(null);\n  var initialPage;\n  var initialRoute;\n\n  var onViewInit = function onViewInit(view) {\n    emit(props, 'viewInit', view);\n\n    if (!init) {\n      routerData.current.instance = view;\n      _f7View.current = routerData.current.instance;\n    }\n  };\n\n  if (f7 && !_f7View.current && init) {\n    var routerId = getRouterId();\n    _f7View.current = f7.views.create(elRef.current, _extends({\n      routerId: routerId,\n      init: false\n    }, noUndefinedProps(props), {\n      browserHistoryInitialMatch: browserHistoryInitialMatch,\n      on: {\n        init: onViewInit\n      }\n    }));\n    routerData.current = {\n      routerId: routerId,\n      instance: _f7View.current\n    };\n    f7routers.views.push(routerData.current);\n\n    if (_f7View.current && _f7View.current.router && (url || main)) {\n      var initialData = getRouterInitialComponent(_f7View.current.router, initialPageComponent);\n      initialPage = initialData.initialPage;\n      initialRoute = initialData.initialRoute;\n\n      if (initialRoute && initialRoute.route && initialRoute.route.masterRoute) {\n        initialPage = undefined;\n        initialRoute = undefined;\n      }\n    }\n  }\n\n  var _useState = useState(initialPage ? [initialPage] : []),\n      pages = _useState[0],\n      _setPages = _useState[1];\n\n  var onResize = function onResize(view, width) {\n    emit(props, 'viewResize', width);\n  };\n\n  var onSwipeBackMove = function onSwipeBackMove(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackMove', swipeBackData);\n  };\n\n  var onSwipeBackBeforeChange = function onSwipeBackBeforeChange(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackBeforeChange', swipeBackData);\n  };\n\n  var onSwipeBackAfterChange = function onSwipeBackAfterChange(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackAfterChange', swipeBackData);\n  };\n\n  var onSwipeBackBeforeReset = function onSwipeBackBeforeReset(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackBeforeReset', swipeBackData);\n  };\n\n  var onSwipeBackAfterReset = function onSwipeBackAfterReset(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackAfterReset', swipeBackData);\n  };\n\n  useImperativeHandle(ref, function () {\n    return {\n      el: elRef.current,\n      f7View: function f7View() {\n        return _f7View.current;\n      }\n    };\n  });\n\n  var onMount = function onMount() {\n    f7ready(function () {\n      if (_f7View.current) {\n        routerData.current.el = elRef.current;\n        routerData.current.pages = pages;\n\n        routerData.current.setPages = function (newPages) {\n          _setPages([].concat(newPages));\n        };\n\n        if (initialPage && initialPage.isAsync && !initialPage.initialComponent) {\n          initialPage.component().then(function () {\n            setTimeout(function () {\n              _f7View.current.init(elRef.current);\n\n              if (initialPage) {\n                initialPage.el = _f7View.current.router.currentPageEl;\n\n                if (initialRoute && initialRoute.route && initialRoute.route.keepAlive) {\n                  initialRoute.route.keepAliveData = {\n                    pageEl: initialPage.el\n                  };\n                }\n              }\n            }, 100);\n          });\n        } else {\n          _f7View.current.init(elRef.current);\n\n          if (initialPage) {\n            initialPage.el = _f7View.current.router.currentPageEl;\n\n            if (initialRoute && initialRoute.route && initialRoute.route.keepAlive) {\n              initialRoute.route.keepAliveData = {\n                pageEl: initialPage.el\n              };\n            }\n          }\n        }\n      } else {\n        var _routerId = getRouterId();\n\n        routerData.current = {\n          el: elRef.current,\n          routerId: _routerId,\n          pages: pages,\n          instance: _f7View.current,\n          setPages: function setPages(newPages) {\n            _setPages([].concat(newPages));\n          }\n        };\n        f7routers.views.push(routerData.current);\n        routerData.current.instance = f7.views.create(elRef.current, _extends({\n          routerId: _routerId\n        }, noUndefinedProps(props), {\n          browserHistoryInitialMatch: browserHistoryInitialMatch,\n          on: {\n            init: onViewInit\n          }\n        }));\n        _f7View.current = routerData.current.instance;\n      }\n\n      if (!init) return;\n\n      _f7View.current.on('resize', onResize);\n\n      _f7View.current.on('swipebackMove', onSwipeBackMove);\n\n      _f7View.current.on('swipebackBeforeChange', onSwipeBackBeforeChange);\n\n      _f7View.current.on('swipebackAfterChange', onSwipeBackAfterChange);\n\n      _f7View.current.on('swipebackBeforeReset', onSwipeBackBeforeReset);\n\n      _f7View.current.on('swipebackAfterReset', onSwipeBackAfterReset);\n    });\n  };\n\n  var onDestroy = function onDestroy() {\n    if (_f7View.current) {\n      _f7View.current.off('resize', onResize);\n\n      _f7View.current.off('swipebackMove', onSwipeBackMove);\n\n      _f7View.current.off('swipebackBeforeChange', onSwipeBackBeforeChange);\n\n      _f7View.current.off('swipebackAfterChange', onSwipeBackAfterChange);\n\n      _f7View.current.off('swipebackBeforeReset', onSwipeBackBeforeReset);\n\n      _f7View.current.off('swipebackAfterReset', onSwipeBackAfterReset);\n\n      if (_f7View.current.destroy) _f7View.current.destroy();\n      _f7View.current = null;\n    }\n\n    f7routers.views.splice(f7routers.views.indexOf(routerData.current), 1);\n    routerData.current = null;\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    onMount();\n    return onDestroy;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    if (routerData.current && f7) {\n      f7events.emit('viewRouterDidUpdate', routerData.current);\n    }\n  });\n  useTab(elRef, props);\n  var classes = classNames(className, 'view', {\n    'view-main': main,\n    'tab-active': tabActive,\n    tab: tab\n  }, colorClasses(props));\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: id,\n    style: style,\n    className: classes,\n    ref: elRef\n  }, extraAttrs), restChildren, pages.map(function (_ref) {\n    var PageComponent = _ref.component,\n        pageId = _ref.id,\n        pageProps = _ref.props,\n        isAsync = _ref.isAsync,\n        initialComponent = _ref.initialComponent;\n    return /*#__PURE__*/React.createElement(RouterContext.Provider, {\n      key: pageId,\n      value: {\n        router: pageProps.f7router,\n        route: pageProps.f7route\n      }\n    }, initialComponent ? /*#__PURE__*/React.cloneElement(initialComponent, _extends({}, pageProps)) : isAsync ? useAsyncComponent(PageComponent, pageProps) : /*#__PURE__*/React.createElement(PageComponent, pageProps));\n  }));\n});\nView.displayName = 'f7-view';\nexport default View;","map":{"version":3,"sources":["/Users/gianningamy/cryptobet/front-end/master/node_modules/framework7-react/esm/components/view.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useRef","useImperativeHandle","useState","useIsomorphicLayoutEffect","classNames","getExtraAttrs","noUndefinedProps","emit","getRouterId","colorClasses","f7ready","f7routers","f7","f7events","useTab","useAsyncComponent","getRouterInitialComponent","RouterContext","View","props","ref","className","id","style","children","_props$init","init","main","tab","tabActive","url","_props$browserHistory","browserHistoryInitialMatch","childrenArray","Children","toArray","initialPageComponent","filter","c","initialPage","restChildren","extraAttrs","_f7View","elRef","routerData","initialRoute","onViewInit","view","current","instance","routerId","views","create","on","push","router","initialData","route","masterRoute","undefined","_useState","pages","_setPages","onResize","width","onSwipeBackMove","data","swipeBackData","onSwipeBackBeforeChange","onSwipeBackAfterChange","onSwipeBackBeforeReset","onSwipeBackAfterReset","el","f7View","onMount","setPages","newPages","concat","isAsync","initialComponent","component","then","setTimeout","currentPageEl","keepAlive","keepAliveData","pageEl","_routerId","onDestroy","off","destroy","splice","indexOf","classes","createElement","map","_ref","PageComponent","pageId","pageProps","Provider","value","f7router","f7route","cloneElement","displayName"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/* eslint-disable no-nested-ternary */\nimport React, { forwardRef, useRef, useImperativeHandle, useState } from 'react';\nimport { useIsomorphicLayoutEffect } from '../shared/use-isomorphic-layout-effect';\nimport { classNames, getExtraAttrs, noUndefinedProps, emit, getRouterId } from '../shared/utils';\nimport { colorClasses } from '../shared/mixins';\nimport { f7ready, f7routers, f7, f7events } from '../shared/f7';\nimport { useTab } from '../shared/use-tab';\nimport { useAsyncComponent } from '../shared/use-async-component';\nimport { getRouterInitialComponent } from '../shared/get-router-initial-component';\nimport { RouterContext } from '../shared/router-context';\n\n\nvar View = /*#__PURE__*/forwardRef(function (props, ref) {\n  var className = props.className,\n      id = props.id,\n      style = props.style,\n      children = props.children,\n      _props$init = props.init,\n      init = _props$init === void 0 ? true : _props$init,\n      main = props.main,\n      tab = props.tab,\n      tabActive = props.tabActive,\n      url = props.url,\n      _props$browserHistory = props.browserHistoryInitialMatch,\n      browserHistoryInitialMatch = _props$browserHistory === void 0 ? true : _props$browserHistory;\n  var childrenArray = React.Children.toArray(children);\n  var initialPageComponent = childrenArray.filter(function (c) {\n    return c.props && c.props.initialPage;\n  })[0];\n  var restChildren = childrenArray.filter(function (c) {\n    return !c.props || !c.props.initialPage;\n  });\n  var extraAttrs = getExtraAttrs(props);\n\n  var _f7View = useRef(null);\n\n  var elRef = useRef(null);\n  var routerData = useRef(null);\n  var initialPage;\n  var initialRoute;\n\n  var onViewInit = function onViewInit(view) {\n    emit(props, 'viewInit', view);\n\n    if (!init) {\n      routerData.current.instance = view;\n      _f7View.current = routerData.current.instance;\n    }\n  };\n\n  if (f7 && !_f7View.current && init) {\n    var routerId = getRouterId();\n    _f7View.current = f7.views.create(elRef.current, _extends({\n      routerId: routerId,\n      init: false\n    }, noUndefinedProps(props), {\n      browserHistoryInitialMatch: browserHistoryInitialMatch,\n      on: {\n        init: onViewInit\n      }\n    }));\n    routerData.current = {\n      routerId: routerId,\n      instance: _f7View.current\n    };\n    f7routers.views.push(routerData.current);\n\n    if (_f7View.current && _f7View.current.router && (url || main)) {\n      var initialData = getRouterInitialComponent(_f7View.current.router, initialPageComponent);\n      initialPage = initialData.initialPage;\n      initialRoute = initialData.initialRoute;\n\n      if (initialRoute && initialRoute.route && initialRoute.route.masterRoute) {\n        initialPage = undefined;\n        initialRoute = undefined;\n      }\n    }\n  }\n\n  var _useState = useState(initialPage ? [initialPage] : []),\n      pages = _useState[0],\n      _setPages = _useState[1];\n\n  var onResize = function onResize(view, width) {\n    emit(props, 'viewResize', width);\n  };\n\n  var onSwipeBackMove = function onSwipeBackMove(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackMove', swipeBackData);\n  };\n\n  var onSwipeBackBeforeChange = function onSwipeBackBeforeChange(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackBeforeChange', swipeBackData);\n  };\n\n  var onSwipeBackAfterChange = function onSwipeBackAfterChange(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackAfterChange', swipeBackData);\n  };\n\n  var onSwipeBackBeforeReset = function onSwipeBackBeforeReset(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackBeforeReset', swipeBackData);\n  };\n\n  var onSwipeBackAfterReset = function onSwipeBackAfterReset(data) {\n    var swipeBackData = data;\n    emit(props, 'swipeBackAfterReset', swipeBackData);\n  };\n\n  useImperativeHandle(ref, function () {\n    return {\n      el: elRef.current,\n      f7View: function f7View() {\n        return _f7View.current;\n      }\n    };\n  });\n\n  var onMount = function onMount() {\n    f7ready(function () {\n      if (_f7View.current) {\n        routerData.current.el = elRef.current;\n        routerData.current.pages = pages;\n\n        routerData.current.setPages = function (newPages) {\n          _setPages([].concat(newPages));\n        };\n\n        if (initialPage && initialPage.isAsync && !initialPage.initialComponent) {\n          initialPage.component().then(function () {\n            setTimeout(function () {\n              _f7View.current.init(elRef.current);\n\n              if (initialPage) {\n                initialPage.el = _f7View.current.router.currentPageEl;\n\n                if (initialRoute && initialRoute.route && initialRoute.route.keepAlive) {\n                  initialRoute.route.keepAliveData = {\n                    pageEl: initialPage.el\n                  };\n                }\n              }\n            }, 100);\n          });\n        } else {\n          _f7View.current.init(elRef.current);\n\n          if (initialPage) {\n            initialPage.el = _f7View.current.router.currentPageEl;\n\n            if (initialRoute && initialRoute.route && initialRoute.route.keepAlive) {\n              initialRoute.route.keepAliveData = {\n                pageEl: initialPage.el\n              };\n            }\n          }\n        }\n      } else {\n        var _routerId = getRouterId();\n\n        routerData.current = {\n          el: elRef.current,\n          routerId: _routerId,\n          pages: pages,\n          instance: _f7View.current,\n          setPages: function setPages(newPages) {\n            _setPages([].concat(newPages));\n          }\n        };\n        f7routers.views.push(routerData.current);\n        routerData.current.instance = f7.views.create(elRef.current, _extends({\n          routerId: _routerId\n        }, noUndefinedProps(props), {\n          browserHistoryInitialMatch: browserHistoryInitialMatch,\n          on: {\n            init: onViewInit\n          }\n        }));\n        _f7View.current = routerData.current.instance;\n      }\n\n      if (!init) return;\n\n      _f7View.current.on('resize', onResize);\n\n      _f7View.current.on('swipebackMove', onSwipeBackMove);\n\n      _f7View.current.on('swipebackBeforeChange', onSwipeBackBeforeChange);\n\n      _f7View.current.on('swipebackAfterChange', onSwipeBackAfterChange);\n\n      _f7View.current.on('swipebackBeforeReset', onSwipeBackBeforeReset);\n\n      _f7View.current.on('swipebackAfterReset', onSwipeBackAfterReset);\n    });\n  };\n\n  var onDestroy = function onDestroy() {\n    if (_f7View.current) {\n      _f7View.current.off('resize', onResize);\n\n      _f7View.current.off('swipebackMove', onSwipeBackMove);\n\n      _f7View.current.off('swipebackBeforeChange', onSwipeBackBeforeChange);\n\n      _f7View.current.off('swipebackAfterChange', onSwipeBackAfterChange);\n\n      _f7View.current.off('swipebackBeforeReset', onSwipeBackBeforeReset);\n\n      _f7View.current.off('swipebackAfterReset', onSwipeBackAfterReset);\n\n      if (_f7View.current.destroy) _f7View.current.destroy();\n      _f7View.current = null;\n    }\n\n    f7routers.views.splice(f7routers.views.indexOf(routerData.current), 1);\n    routerData.current = null;\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    onMount();\n    return onDestroy;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    if (routerData.current && f7) {\n      f7events.emit('viewRouterDidUpdate', routerData.current);\n    }\n  });\n  useTab(elRef, props);\n  var classes = classNames(className, 'view', {\n    'view-main': main,\n    'tab-active': tabActive,\n    tab: tab\n  }, colorClasses(props));\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: id,\n    style: style,\n    className: classes,\n    ref: elRef\n  }, extraAttrs), restChildren, pages.map(function (_ref) {\n    var PageComponent = _ref.component,\n        pageId = _ref.id,\n        pageProps = _ref.props,\n        isAsync = _ref.isAsync,\n        initialComponent = _ref.initialComponent;\n    return /*#__PURE__*/React.createElement(RouterContext.Provider, {\n      key: pageId,\n      value: {\n        router: pageProps.f7router,\n        route: pageProps.f7route\n      }\n    }, initialComponent ? /*#__PURE__*/React.cloneElement(initialComponent, _extends({}, pageProps)) : isAsync ? useAsyncComponent(PageComponent, pageProps) : /*#__PURE__*/React.createElement(PageComponent, pageProps));\n  }));\n});\nView.displayName = 'f7-view';\nexport default View;"]},"metadata":{},"sourceType":"module"}