{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/gianningamy/cryptobet/front-end/master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/Users/gianningamy/cryptobet/front-end/master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gianningamy/cryptobet/front-end/master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gianningamy/cryptobet/front-end/master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState,useEffect}from\"react\";import styled from\"styled-components\";import Betting from\"../Components/Betting\";import CurrentGame from\"../Components/CurrentGame\";import PreviousGame from\"../Components/PreviousGame\";import Navbar from\"../Components/Navbar\";import Web3 from'web3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Homepage=function Homepage(){var web3=new Web3(window.ethereum);var abi=[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_lastGame\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"}],\"name\":\"_changeCurrentGame\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"_initCycle\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_joinDown\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_joinUp\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256[]\",\"name\":\"_game\",\"type\":\"uint256[]\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_reward\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_rewardAdmin\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"update\",\"type\":\"uint256\"}],\"name\":\"_setIntervalTime\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"}],\"name\":\"_updateTreasury\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"Games\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"upAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"downAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"rewardAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"rewardPoolAmount\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"rewardCalculated\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"endTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"priceEnd\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"NextCurrentGame\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"currentGameId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feesAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feesRate\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getCurrentPrice\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"_price\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getUserWins\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"_winGames\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"initCycle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"intervalSeconds\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"idGame\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"isWinner\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"_isWinner\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"joinDown\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"joinUp\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256[]\",\"name\":\"idGames\",\"type\":\"uint256[]\"}],\"name\":\"reward\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"rewardAdmin\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_intervalSeconds\",\"type\":\"uint256\"}],\"name\":\"setIntervalSeconds\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"userGames\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"users\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"poolChoice\",\"type\":\"uint8\"},{\"internalType\":\"bool\",\"name\":\"claimed\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}];var contract=new web3.eth.Contract(abi,\"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\");var _useState=useState({account:\"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\",balance:\"0\",network:\"Not connected\",contract:\"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\"}),_useState2=_slicedToArray(_useState,2),userInfos=_useState2[0],setUserInfos=_useState2[1];var _useState3=useState({previous:0,current:0,next:0}),_useState4=_slicedToArray(_useState3,2),idCurrentGame=_useState4[0],setIdCurrentGame=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectedAccount=_useState6[0],setSelectedAccount=_useState6[1];function logAccount(){return _logAccount.apply(this,arguments);}function _logAccount(){_logAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var provider,web3,rewardList,reward,game,user,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:provider=window.ethereum;web3=new Web3(window.ethereum);if(!(typeof provider!=='undefined')){_context.next=43;break;}_context.next=5;return provider.request({method:'eth_requestAccounts'}).then(function(accounts){setSelectedAccount(accounts[0]);}).catch(function(err){console.log(err);return;});case 5:_context.next=7;return window.ethereum.on('accountsChanged',function(accounts){setSelectedAccount(accounts[0]);});case 7:if(!(selectedAccount!==\"\")){_context.next=43;break;}_context.next=10;return contract.methods.getUserWins(selectedAccount).call();case 10:rewardList=_context.sent;reward=0;i=0;case 13:if(!(i<rewardList.length)){_context.next=24;break;}if(!(rewardList[i]>0)){_context.next=21;break;}_context.next=17;return contract.methods.Games(rewardList[i]).call().then(function(receipt){game=receipt;});case 17:_context.next=19;return contract.methods.users(rewardList[i],userInfos.account).call();case 19:user=_context.sent;reward+=user.amount*game.rewardAmount/game.rewardPoolAmount;case 21:i++;_context.next=13;break;case 24:_context.t0=setUserInfos;_context.t1=selectedAccount;_context.t2=web3.utils;_context.next=29;return web3.eth.getBalance(selectedAccount);case 29:_context.t3=_context.sent;_context.next=32;return _context.t2.fromWei.call(_context.t2,_context.t3,'ether');case 32:_context.t4=_context.sent;_context.t5=parseFloat;_context.next=36;return web3.utils.fromWei(String(reward),'ether');case 36:_context.t6=_context.sent;_context.t7=(0,_context.t5)(_context.t6).toFixed(3);_context.next=40;return web3.eth.net.getNetworkType();case 40:_context.t8=_context.sent;_context.t9={account:_context.t1,balance:_context.t4,rewards:_context.t7,network:_context.t8,contract:\"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\",status:\"connected\"};(0,_context.t0)(_context.t9);case 43:case\"end\":return _context.stop();}}},_callee);}));return _logAccount.apply(this,arguments);}function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return contract.methods.currentGameId.call().call().then(function(receipt){setIdCurrentGame({previous:parseInt(receipt)-1,current:parseInt(receipt),next:parseInt(receipt)+1});});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getData.apply(this,arguments);}function reward(){return _reward.apply(this,arguments);}function _reward(){_reward=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return window.ethereum.enable();case 2:_context3.t0=contract.methods;_context3.next=5;return contract.methods.getUserWins(selectedAccount).call();case 5:_context3.t1=_context3.sent;_context3.next=8;return _context3.t0.reward.call(_context3.t0,_context3.t1).send({from:selectedAccount});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _reward.apply(this,arguments);}useEffect(function(){logAccount();setTimeout(function(){getData();},1000);if(window.ethereum){window.ethereum.on(\"chainChanged\",function(){window.location.reload();});window.ethereum.on(\"accountsChanged\",function(){window.location.reload();});}},[selectedAccount,idCurrentGame]);return/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsx(Navbar,{userInfos:userInfos}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(PreviousGame,{userInfos:userInfos,idCurrentGame:idCurrentGame.previous}),/*#__PURE__*/_jsx(CurrentGame,{userInfos:userInfos,idCurrentGame:idCurrentGame.current}),/*#__PURE__*/_jsx(Betting,{userInfos:userInfos,idCurrentGame:idCurrentGame.next})]}),/*#__PURE__*/_jsxs(Reward,{children:[/*#__PURE__*/_jsxs(RewardText,{children:[userInfos.rewards>0?userInfos.rewards:0,\" MATIC\"]}),/*#__PURE__*/_jsx(RewardButton,{onClick:function onClick(){return reward();},children:\"Collect rewards\"})]})]});};var Main=styled.main(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\theight: 100%;\\n\\twidth: 100%;\\n\\tbackground: #212429;\\n\"])));var Container=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tgap: 5%;\\n\"])));var Reward=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\tmargin-left: 40%;\\n\\tmargin-top: 11%;\\n\\tgrid-area: reward;\\n\\tbackground-color: #191b1f;\\n\\tborder: 1px solid #191b1f;\\n\\tpadding: 0.5rem;\\n\\tborder-radius: 0.5rem;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\twidth: 20%;\\n\\talign-items: center;\\n\"])));var RewardText=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\\tcolor: rgb(149, 177, 254);\\n\\tpadding: 0.5rem;\\n\\tborder-radius: 0.5rem;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tfont-family: Inter,sans-serif;\\n\"])));var RewardButton=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\tfont-size: 100%;\\n\\tcolor: rgb(84, 36, 50);\\n\\tfont-family: 'Inter custom',sans-serif;\\n\\tbackground-image: linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\\n\\tpadding: 16px;\\n\\twidth:  100%;\\n\\tfont-weight: 500;\\n\\ttext-align: center;\\n\\tborder-radius: 20px;\\n\\toutline: none;\\n\\tborder: 1px solid #191b1f;\\n\\ttext-decoration: none;\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\tflex-wrap: nowrap;\\n\\talign-items: center;\\n\\tcursor: pointer;\\n\\tposition: relative;\\n\\tz-index: 1;\\n\\t&:disabled {\\n\\t\\tcursor: auto;\\n\\t\\tpointer-events: none;\\n\\t}\\n\\n\\twill-change: transform;\\n\\ttransition: transform 450ms ease;\\n\\ttransform: perspective(1px) translateZ(0);\\n\\n\\t> * {\\n\\t\\tuser-select: none;\\n\\t}\\n\\n\\t> a {\\n\\t\\ttext-decoration: none;\\n\\t}\\n\"])));export default Homepage;","map":{"version":3,"sources":["/Users/gianningamy/cryptobet/front-end/master/src/Pages/Homepage.jsx"],"names":["React","useState","useEffect","styled","Betting","CurrentGame","PreviousGame","Navbar","Web3","Homepage","web3","window","ethereum","abi","contract","eth","Contract","account","balance","network","userInfos","setUserInfos","previous","current","next","idCurrentGame","setIdCurrentGame","selectedAccount","setSelectedAccount","logAccount","provider","request","method","then","accounts","catch","err","console","log","on","methods","getUserWins","call","rewardList","reward","i","length","Games","receipt","game","users","user","amount","rewardAmount","rewardPoolAmount","utils","getBalance","fromWei","parseFloat","String","toFixed","net","getNetworkType","rewards","status","getData","currentGameId","parseInt","enable","send","from","setTimeout","location","reload","Main","main","Container","div","Reward","RewardText","RewardButton","button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport Betting from \"../Components/Betting\"\nimport CurrentGame from \"../Components/CurrentGame\"\nimport PreviousGame from \"../Components/PreviousGame\"\nimport Navbar from \"../Components/Navbar\"\nimport Web3 from 'web3'\n\nconst Homepage = () => {\n\tconst web3 = new Web3(window.ethereum);\n\tlet abi = [{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_lastGame\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"}],\"name\":\"_changeCurrentGame\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"_initCycle\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_joinDown\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_joinUp\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256[]\",\"name\":\"_game\",\"type\":\"uint256[]\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_reward\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"_rewardAdmin\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"update\",\"type\":\"uint256\"}],\"name\":\"_setIntervalTime\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"_game\",\"type\":\"uint256\"}],\"name\":\"_updateTreasury\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"Games\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"upAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"downAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"rewardAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"rewardPoolAmount\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"rewardCalculated\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"endTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"priceEnd\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"NextCurrentGame\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"currentGameId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feesAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feesRate\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getCurrentPrice\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"_price\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getUserWins\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"_winGames\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"initCycle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"intervalSeconds\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"idGame\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"isWinner\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"_isWinner\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"joinDown\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"joinUp\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256[]\",\"name\":\"idGames\",\"type\":\"uint256[]\"}],\"name\":\"reward\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"rewardAdmin\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_intervalSeconds\",\"type\":\"uint256\"}],\"name\":\"setIntervalSeconds\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"userGames\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"users\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"poolChoice\",\"type\":\"uint8\"},{\"internalType\":\"bool\",\"name\":\"claimed\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}];\n\tlet contract = new web3.eth.Contract(abi, \"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\");\n\n\tconst [userInfos, setUserInfos] = useState({account: \"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\",\n\t\t\t\t\tbalance: \"0\",\n\t\t\t\t\tnetwork: \"Not connected\",\n\t\t\t\t\tcontract: \"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\",\n\t\t\t\t});\n\tconst [idCurrentGame, setIdCurrentGame] = useState({\n\t\tprevious: 0,\n\t\tcurrent: 0,\n\t\tnext: 0\n\t});\n\tconst [selectedAccount, setSelectedAccount] = useState(\"\");\n\n\tasync function logAccount(){\n\t\tlet provider = window.ethereum;\n\t\tconst web3 = new Web3(window.ethereum);\n\n\t\tif (typeof provider !== 'undefined') {\n\t\t\tawait provider\n\t\t\t\t.request({ method: 'eth_requestAccounts' })\n\t\t\t\t\t.then((accounts) => {\n\t\t\t\t\tsetSelectedAccount(accounts[0]);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\treturn;\n\t\t\t\t});\n\n\t\t\tawait window.ethereum.on('accountsChanged', function (accounts) {\n\t\t\t\tsetSelectedAccount(accounts[0]);\n\t\t\t});\n\t\t\t\n\t\t\tif(selectedAccount !== \"\"){\n\n\t\t\t\tvar rewardList = await contract.methods.getUserWins(selectedAccount).call();\n\t\t\t\tvar reward = 0;\n\t\t\t\tvar game;\n\t\t\t\tvar user;\n\n\t\t\t\tfor(var i=0; i<rewardList.length; i++){\n\t\t\t\t\tif(rewardList[i] > 0){\n\t\t\t\t\t\tawait contract.methods.Games(rewardList[i]).call()\n\t\t\t\t\t\t\t.then(function(receipt){\n\t\t\t\t\t\t\t\tgame = receipt;\n\t\t\t\t\t\t\t});\t\n\n\t\t\t\t\t\tuser = await contract.methods.users(rewardList[i], userInfos.account).call()\n\t\t\t\t\t\treward += (user.amount*game.rewardAmount)/game.rewardPoolAmount\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsetUserInfos({\n\t\t\t\t\taccount: selectedAccount,\n\t\t\t\t\tbalance: await web3.utils.fromWei(await web3.eth.getBalance(selectedAccount), 'ether'),\n\t\t\t\t\trewards: parseFloat(await web3.utils.fromWei(String(reward), 'ether')).toFixed(3),\n\t\t\t\t\tnetwork: await web3.eth.net.getNetworkType(),\n\t\t\t\t\tcontract: \"0xb95C89C253c1f4Ed8Dd8c5c4D510560b9157E51e\",\n\t\t\t\t\tstatus: \"connected\",\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tasync function getData(){\n\n\t\t\tawait contract.methods.currentGameId.call().call()\n\t\t\t\t.then(function(receipt){\n\t\t\t\t\tsetIdCurrentGame({\n\t\t\t\t\t\tprevious: parseInt(receipt)-1,\n\t\t\t\t\t\tcurrent: parseInt(receipt),\n\t\t\t\t\t\tnext: parseInt(receipt)+1\n\t\t\t\t\t});\n\t\t\t\t});\n\t}\n\n\tasync function reward(){\n\t\tawait window.ethereum.enable();\n\t\tawait contract.methods.reward(await contract.methods.getUserWins(selectedAccount).call()).send({from: selectedAccount});\n\t}\n\tuseEffect(() => {\n\t\tlogAccount();\n\t\tsetTimeout(() => {  getData(); }, 1000);\n\t\tif (window.ethereum) {\n\t\t\twindow.ethereum.on(\"chainChanged\", () => {\n\t\t\t\twindow.location.reload()\n\t\t\t})\n\t\t\twindow.ethereum.on(\"accountsChanged\", () => {\n\t\t\t\twindow.location.reload()\n\t\t\t})\n\t\t}\n\t}, [selectedAccount, idCurrentGame])\n\treturn (\n\t\t<Main>\n\t\t\t<Navbar userInfos={userInfos}/>\n\t\t\t<Container>\n\n\t\t\t\t<PreviousGame userInfos={userInfos} idCurrentGame={idCurrentGame.previous}/>\n\t\t\t\t<CurrentGame userInfos={userInfos} idCurrentGame={idCurrentGame.current}/>\n\t\t\t\t<Betting userInfos={userInfos} idCurrentGame={idCurrentGame.next}/>\n\t\t\t</Container>\n\t\t\t<Reward>\n\t\t\t\t<RewardText>{userInfos.rewards > 0 ? userInfos.rewards: 0} MATIC</RewardText>\n\t\t\t\t<RewardButton onClick={() => reward()}>Collect rewards</RewardButton>\n\t\t\t</Reward>\n\t\t</Main>\n\t)\n}\n\nconst Main = styled.main`\n\theight: 100%;\n\twidth: 100%;\n\tbackground: #212429;\n`\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: 5%;\n`\n\nconst Reward = styled.div`\n\tmargin-left: 40%;\n\tmargin-top: 11%;\n\tgrid-area: reward;\n\tbackground-color: #191b1f;\n\tborder: 1px solid #191b1f;\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 20%;\n\talign-items: center;\n`\n\nconst RewardText = styled.div`\n\tcolor: rgb(149, 177, 254);\n\tpadding: 0.5rem;\n\tborder-radius: 0.5rem;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-family: Inter,sans-serif;\n`\n\nconst RewardButton = styled.button`\n\tfont-size: 100%;\n\tcolor: rgb(84, 36, 50);\n\tfont-family: 'Inter custom',sans-serif;\n\tbackground-image: linear-gradient(90deg, rgb(206, 162, 206) 0%, rgb(149, 177, 254) 100%);\n\tpadding: 16px;\n\twidth:  100%;\n\tfont-weight: 500;\n\ttext-align: center;\n\tborder-radius: 20px;\n\toutline: none;\n\tborder: 1px solid #191b1f;\n\ttext-decoration: none;\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: nowrap;\n\talign-items: center;\n\tcursor: pointer;\n\tposition: relative;\n\tz-index: 1;\n\t&:disabled {\n\t\tcursor: auto;\n\t\tpointer-events: none;\n\t}\n\n\twill-change: transform;\n\ttransition: transform 450ms ease;\n\ttransform: perspective(1px) translateZ(0);\n\n\t> * {\n\t\tuser-select: none;\n\t}\n\n\t> a {\n\t\ttext-decoration: none;\n\t}\n`\n\nexport default Homepage\n"]},"metadata":{},"sourceType":"module"}